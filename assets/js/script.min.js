var programma = [];

function vergaderingNaarArray() {
    if (document.getElementById("subject").value &&
        document.getElementById("startDate").value &&
        document.getElementById("startTime").value &&
        document.getElementById("endDate").value &&
        document.getElementById("endTime").value &&
        document.getElementById("description").value &&
        document.getElementById("location").value
    ){
        clearVergaderingList();
        programma.push({
                Subject: document.getElementById("subject").value,
                StartDate: document.getElementById("startDate").value,
                StartTime: document.getElementById("startTime").value,
                EndDate: document.getElementById("endDate").value,
                EndTime: document.getElementById("endTime").value,
                AllDayEvent: "false",
                Description: document.getElementById("description").value,
                Location: document.getElementById("location").value
            }
        );
        programma.forEach(function (item) {
            var li = document.createElement('li');
            document.getElementById('vergaderingenList').appendChild(li);
            li.className += "list-group-item";
            li.innerHTML += item.Subject;
            li.onclick = function () {
                programma.pop(findVergadering(this));
                this.remove();
            };
        });
        document.getElementById("vergaderingFormulier").reset();
    }

}

function clearVergaderingList(){
    while(document.getElementById('vergaderingenList').firstChild){
        document.getElementById('vergaderingenList').removeChild(document.getElementById('vergaderingenList').firstChild);
    }

}

function findVergadering(title) {
    for (var key in programma) {
        if (programma[key].Subject == title) return key;
    }
    return false;
}


function downloadCSV(args) {
    var data, filename, link;
    var data = "text/json;charset=utf-8," + encodeURIComponent(JSON.stringify(programma));
    link = document.createElement('a');
    link.setAttribute('href', data);
    link.setAttribute('download', filename);
    link.click();
}